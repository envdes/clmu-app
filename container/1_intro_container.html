<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction &mdash; clmu-app v0.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=f3b75425"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            clmu-app
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_docker.html">Install Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="run_container.html">Run container</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_run_CLM_case.html">Run a CLM case</a></li>
<li class="toctree-l1"><a class="reference internal" href="clmu_env.html">CLM ENV Container detail</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">clmu-app</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Introduction</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/container/1_intro_container.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h1>
<section id="what-is-a-container">
<h2><a class="reference external" href="https://docs.docker.com/guides/walkthroughs/what-is-a-container/">What is a container?</a><a class="headerlink" href="#what-is-a-container" title="Permalink to this heading"></a></h2>
<p>From docker: “A container is an isolated environment for your code. This means that a container does not know the machine’s operating system or your files. It runs on the environment provided to you by Docker Desktop. Containers have everything that your code needs to run, down to a base operating system. You can use Docker Desktop to manage and explore your containers.”</p>
</section>
<section id="what-is-clmu">
<h2>What is CLMU?<a class="headerlink" href="#what-is-clmu" title="Permalink to this heading"></a></h2>
<p>CLMU is the Community Land Model-Urban, hosted by the National Center for Atmospheric Research (NCAR). CLMU acts as an urban model with a single-layer canopy scheme under the Earth system model hierarchy.</p>
<p>See more details in <a class="reference external" href="https://escomp.github.io/ctsm-docs/versions/master/html/tech_note/Urban/CLM50_Tech_Note_Urban.html">CLM Technical Note</a>.</p>
<p><img alt="Alt text" src="../_images/clmu.jpg" /></p>
<center>Urban parameterization in CLMU. <a href="https://escomp.github.io/ctsm-docs/versions/master/html/tech_note/Urban/CLM50_Tech_Note_Urban.html">(Fig sources)</a></center></section>
<section id="why-use-a-container-for-clmu">
<h2>Why use a container for CLMU?<a class="headerlink" href="#why-use-a-container-for-clmu" title="Permalink to this heading"></a></h2>
<p>Running CMLU within CLM (Community Land Model) requires a Linux operation system with certain <a class="reference external" href="https://escomp.github.io/CESM/versions/cesm2.2/html/introduction.html#cesm2-software-operating-system-prerequisites">software requirements</a>. Without professional support from technicians, it is a challenge for scientists or other potential users to port the CLM running environment by themselves. Here, we use a container to build an ENV fitting the recent version of <a class="reference external" href="https://github.com/ESCOMP/CTSM">CTSM/CLM</a>. Further, we can apply the container on cloud platforms or local computers to conduct some interesting experiments.</p>
</section>
<section id="user-notice">
<h2>User notice<a class="headerlink" href="#user-notice" title="Permalink to this heading"></a></h2>
<p>Running a global CESM/CTSM case requires a lot of computing resources that cannot be done on a local computer. Therefore, the clmu-app only serves a single point of simulation, and it is not recommended to use container for global simulation. Therefore, we recommend using this container for the following related research:</p>
<ul class="simple">
<li><p>single point case <a class="reference external" href="https://escomp.github.io/ctsm-docs/versions/master/html/users_guide/running-single-points/running-pts_mode-configurations.html">PTS mode</a></p></li>
<li><p>test case on local before an expensive simulation</p></li>
<li><p>test parameter sensitivity</p></li>
</ul>
<p><strong>Notice1</strong>
PTS mode currently CAN NOT run with initial conditions., however, we can still can take advantage of this mode. Firstly, we can run case for longer time simulation to get the stable conditions. Moreover, although the land use models is model simulations are sensitive to initial soil moisture conditions, the urban module (CLMU) is less affected by soil. We compared two cases of different simulation time of New York Grid <code class="docutils literal notranslate"><span class="pre">lat=40.05</span></code>, <code class="docutils literal notranslate"><span class="pre">lon=-73.75</span></code>, <code class="docutils literal notranslate"><span class="pre">res=f09_g17</span></code>, <code class="docutils literal notranslate"><span class="pre">compset=2000_DATM%CRUv7_CLM50%SP_SICE_SOCN_SROF_SGLC_SWAV</span></code>. The 2015 JJA average <code class="docutils literal notranslate"><span class="pre">TREFMXAV</span></code>, <code class="docutils literal notranslate"><span class="pre">TREFMNAV</span></code>, <code class="docutils literal notranslate"><span class="pre">TSA</span></code> and <code class="docutils literal notranslate"><span class="pre">RH2M</span></code> of high density urban between the case of simulation time of 2005-2015 and the case of simulation time of 2015 JJA were compared. Their absolute difference are <code class="docutils literal notranslate"><span class="pre">0.009</span> <span class="pre">K</span></code>, <code class="docutils literal notranslate"><span class="pre">0.035</span> <span class="pre">K</span></code>, <code class="docutils literal notranslate"><span class="pre">0.023</span> <span class="pre">K</span></code> and <code class="docutils literal notranslate"><span class="pre">0.076</span> <span class="pre">%</span></code>, respectively. For the whole 2015 year, the absolute difference are <code class="docutils literal notranslate"><span class="pre">0.003</span> <span class="pre">K</span></code>, <code class="docutils literal notranslate"><span class="pre">0.003</span> <span class="pre">K</span></code>, <code class="docutils literal notranslate"><span class="pre">0.002</span> <span class="pre">K</span></code> and <code class="docutils literal notranslate"><span class="pre">0.005</span> <span class="pre">%</span></code>, respectively. However, it should be noted that the difference in <code class="docutils literal notranslate"><span class="pre">vegetated_or_bare_soil</span></code> land unit are <code class="docutils literal notranslate"><span class="pre">0.123</span> <span class="pre">K</span></code>, <code class="docutils literal notranslate"><span class="pre">0.191</span> <span class="pre">K</span></code>, <code class="docutils literal notranslate"><span class="pre">0.036</span> <span class="pre">K</span></code> and <code class="docutils literal notranslate"><span class="pre">0.173</span> <span class="pre">%</span></code> (<code class="docutils literal notranslate"><span class="pre">0.018</span> <span class="pre">K</span></code>, <code class="docutils literal notranslate"><span class="pre">0.018</span> <span class="pre">K</span></code>, <code class="docutils literal notranslate"><span class="pre">0.038</span> <span class="pre">K</span></code> and <code class="docutils literal notranslate"><span class="pre">0.164</span> <span class="pre">%</span></code> for whole year), which is more significantly affected than urban. We recommend a long time simulation or spin-up for the experiments need non-urban variables. <code class="docutils literal notranslate"><span class="pre">TREFMXAV</span></code>, <code class="docutils literal notranslate"><span class="pre">TREFMNAV</span></code>, <code class="docutils literal notranslate"><span class="pre">TSA</span></code> and <code class="docutils literal notranslate"><span class="pre">RH2M</span></code> are daily maximum of average 2-m temperature, daily minimum of average 2-m temperature, 2m air temperature and 2m relative humidity, respectively.</p>
<p><strong>Notice2</strong>
The clmu-app currently does not provide ESMF as we want a compact container. The ESMF is important for making your own data of other mode of single points. We recommend to prepare the date out of the clmu-app, and then bind/import them to clmu-app to run the special single point case. If ESMF is still need, user can install it as follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Required envs for building libraries</span>
<span class="n">ENV</span> <span class="n">ESMF_DIR</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">bld</span><span class="o">/</span><span class="n">esmf</span><span class="o">-</span><span class="n">ESMF_8_0_1</span>
<span class="n">ENV</span> <span class="n">ESMF_INSTALL_PREFIX</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span>
<span class="n">ENV</span> <span class="n">ESMF_INSTALL_MODDIR</span><span class="o">=</span><span class="n">include</span>
<span class="n">ENV</span> <span class="n">ESMF_INSTALL_LIBDIR</span><span class="o">=</span><span class="n">lib</span>
<span class="n">ENV</span> <span class="n">ESMF_INSTALL_BINDIR</span><span class="o">=</span><span class="nb">bin</span>
<span class="n">ENV</span> <span class="n">PATH</span><span class="o">=</span><span class="s2">&quot;/usr/lib64/openmpi/bin:$</span><span class="si">{PATH}</span><span class="s2">&quot;</span>

<span class="c1"># Build and install ESMF libraries</span>
<span class="n">cd</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">bld</span> 
<span class="n">wget</span> <span class="o">-</span><span class="n">c</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">esmf</span><span class="o">-</span><span class="n">org</span><span class="o">/</span><span class="n">esmf</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="n">ESMF_8_0_1</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> 
<span class="n">tar</span> <span class="n">zxf</span> <span class="n">ESMF_8_0_1</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> 
<span class="n">cd</span> <span class="n">esmf</span><span class="o">-</span><span class="n">ESMF_8_0_1</span> 
<span class="n">make</span> <span class="o">-</span><span class="n">j</span> <span class="o">&amp;&amp;</span> <span class="n">make</span> <span class="n">install</span> 
</pre></div>
</div>
</section>
<section id="python-for-urban-climate-exploration">
<h2><a class="reference internal" href="5_python_API.html"><span class="doc">Python for urban climate exploration</span></a><a class="headerlink" href="#python-for-urban-climate-exploration" title="Permalink to this heading"></a></h2>
<p>We apply some Python code to help run a case of CLM to explore urban climate.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Junjie Yu, Zhonghua Zheng, Yuan Sun, Keith Oleson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>