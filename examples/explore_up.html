

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Exploration of climate sensitive of different urban parameters using clmu-app &mdash; clmu-app v0.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=f3b75425"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            clmu-app
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../container/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../container/install_docker.html">Install Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../container/run_container.html">Run container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../container/4_run_CLM_case.html">Run a CLM case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../container/clmu_env.html">CLM ENV Container detail</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">clmu-app</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Exploration of climate sensitive of different urban parameters using clmu-app</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/explore_up.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="exploration-of-climate-sensitive-of-different-urban-parameters-using-clmu-app">
<h1>Exploration of climate sensitive of different urban parameters using clmu-app<a class="headerlink" href="#exploration-of-climate-sensitive-of-different-urban-parameters-using-clmu-app" title="Permalink to this heading">ÔÉÅ</a></h1>
<p>As the examples describe, one of the useful functions of clmu-app is to explore the urban climate with changing urban surface parameters. By investigating this, we can gain information on urban planning/design or offer opportunities for other urban related subjects.</p>
<p>Here we explored the 24 girds that contain the most developed cities in the world (ref: https://en.wikipedia.org/wiki/Globalization_and_World_Cities_Research_Network ).</p>
<p>The CLMU can simulate 3 urban classes. Only the high density urban is considered in this experiment as HD has an obvious urban effect and is ubiquitous in each grid. We selected three categories of urban parameters, including morphological, radiative and thermal parameters, for sensitive analysis.</p>
<p><strong>Results preview</strong></p>
<p>Env: clmu-app</p>
<ul class="simple">
<li><p>Forcing: DATM SSP370</p></li>
<li><p>Simulation year: 2055</p></li>
<li><p>New York Grid</p></li>
<li><p>Compset:SSP370_DATM%CPLHIST_CLM50%SP_SICE_SOCN_SROF_SGLC_SWAV</p></li>
<li><p>Resolution: f09_g17</p></li>
<li><p>Run type: cold start</p></li>
</ul>
<p>Experiment: each HD urban surface parameters increased by 1.2 times respectively.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Variable</th>
<th>Long name</th>
<th>Units</th>
<th>Category</th>
</tr>
</thead>
<tbody>
<tr>
<td>ALB_ROOF</td>
<td>albedo of roof</td>
<td>unitless</td>
<td>radiative</td>
</tr>
<tr>
<td>ALB_WALL</td>
<td>albedo of wall</td>
<td>unitless</td>
<td>radiative</td>
</tr>
<tr>
<td>ALB_IMPROAD</td>
<td>albedo of impervious road</td>
<td>unitless</td>
<td>radiative</td>
</tr>
<tr>
<td>CANYON_HWR</td>
<td>canyon height to width ratio</td>
<td>unitless</td>
<td>morphological</td>
</tr>
<tr>
<td>HT_ROOF</td>
<td>height of roof</td>
<td>meters</td>
<td>morphological</td>
</tr>
<tr>
<td>THICK_ROOF</td>
<td>thickness of roof</td>
<td>meters</td>
<td>morphological</td>
</tr>
<tr>
<td>THICK_WALL</td>
<td>thickness of roof</td>
<td>meters</td>
<td>morphological</td>
</tr>
<tr>
<td>TK_ROOF</td>
<td>thermal conductivity of roof</td>
<td>W/m*K</td>
<td>thermal</td>
</tr>
<tr>
<td>TK_WALL</td>
<td>thermal conductivity of wall</td>
<td>W/m*K</td>
<td>thermal</td>
</tr>
<tr>
<td>TK_IMPROAD</td>
<td>thermal conductivity of impervious road</td>
<td>W/m*K</td>
<td>thermal</td>
</tr>
<tr>
<td>CV_ROOF</td>
<td>volumetric heat capacity of roof</td>
<td>J/m^3*K</td>
<td>thermal</td>
</tr>
<tr>
<td>CV_WALL</td>
<td>volumetric heat capacity of wall</td>
<td>J/m^3*K</td>
<td>thermal</td>
</tr>
<tr>
<td>TK_IMPROAD</td>
<td>volumetric heat capacity of impervious road</td>
<td>J/m^3*K</td>
<td>thermal</td>
</tr>
</tbody>
</table><p>Primary results:</p>
<ul class="simple">
<li><p>TSA: Surface 2m temperature (yearly average), K</p></li>
<li><p>TSA difference: difference in result of changed urban surface and no change.</p></li>
</ul>
<p><img alt="Alt text" src="../_images/TSA_diff_rad.png" /></p>
<center>Radiative sensitives. </a></center><hr class="docutils" />
<p><img alt="Alt text" src="../_images/TSA_diff_mod.png" /></p>
<center>Morphological sensitives. </a></center><hr class="docutils" />
<p><img alt="Alt text" src="../_images/TSA_diff_thm.png" /></p>
<center>Thermal sensitives. </a></center><p><strong>ref code</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;/home/zhonghua/docker/DRL_urban_climate_adaptation/RLctsm/&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;/home/zhonghua/docker/DRL_urban_climate_adaptation/RLctsm/&#39;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">utils.cesm</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">utils.ini_env</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">def</span> <span class="nf">run_case</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">sur_var</span><span class="p">,</span> <span class="n">case_year</span><span class="o">=</span><span class="s2">&quot;2055&quot;</span><span class="p">,</span> <span class="n">script_name</span> <span class="o">=</span> <span class="s2">&quot;PTS_SSP370_up.sh&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">now_time</span><span class="p">())</span>

    <span class="n">CASESCRIPT</span> <span class="o">=</span> <span class="s2">&quot;/p/project/clm5.0/cime/scripts&quot;</span>
    <span class="n">CASESCRIPT_local</span> <span class="o">=</span> <span class="s2">&quot;/home/zhonghua/p/project/clm5.0/cime/scripts&quot;</span>
    <span class="n">CASEROOT_local</span> <span class="o">=</span> <span class="s2">&quot;/home/zhonghua/p/scratch/CESMDATAROOT/CaseOutputs&quot;</span>
    <span class="n">DOUT_S_ROOT</span> <span class="o">=</span> <span class="s2">&quot;/home/zhonghua/p/scratch/CESMDATAROOT/Archive&quot;</span>

    <span class="n">scriptpath</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./scr/</span><span class="si">{</span><span class="n">script_name</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">configpath</span> <span class="o">=</span> <span class="s2">&quot;./notebook/config_SSP370_up.json&quot;</span>

    <span class="n">cesm</span> <span class="o">=</span> <span class="n">cesm_run</span><span class="p">(</span><span class="n">CASESCRIPT</span><span class="p">,</span> <span class="n">CASESCRIPT_local</span><span class="p">,</span> <span class="n">CASEROOT_local</span><span class="p">,</span> <span class="n">DOUT_S_ROOT</span><span class="p">,</span> <span class="n">configpath</span><span class="p">)</span>

    <span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;case_lat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">case_loc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;case_lat&#39;</span><span class="p">]</span>
    <span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;case_lon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">case_loc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;case_lon&#39;</span><span class="p">]</span>
    
    <span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;case_start_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">case_year</span>
    <span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;case_end_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">case_year</span>

    <span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;fsurdat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;fsurdat&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;env_id&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;case_name&#39;</span><span class="p">])</span>
    <span class="n">local_fsurdat_temp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;local_fsurdat&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;env_id&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;local_fsurdat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;local_fsurdat&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;env_id&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;case_name&#39;</span><span class="p">])</span>

    <span class="c1"># copy the surface data</span>
    <span class="n">copy_file_if_not_exists2</span><span class="p">(</span><span class="n">local_fsurdat_temp</span><span class="p">,</span> 
                                <span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;local_fsurdat&#39;</span><span class="p">],</span>
                                <span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;case_lon&#39;</span><span class="p">],</span>
                                <span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;case_lat&#39;</span><span class="p">],</span>
                                <span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/home/zhonghua/p/pyscripts/</span><span class="si">{</span><span class="n">script_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cesm</span><span class="o">.</span><span class="n">create_case</span><span class="p">(</span><span class="n">scriptpath</span><span class="p">))</span>

    <span class="n">alb_paramdict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">lsmlat</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">lsmlon</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">numurbl</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">sur_var</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;local_fsurdat&#39;</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">sur_var</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;ALB_IMPROAD&#39;</span><span class="p">,</span><span class="s1">&#39;ALB_ROOF&#39;</span><span class="p">,</span><span class="s1">&#39;ALB_WALL&#39;</span><span class="p">]</span> <span class="p">:</span>

            <span class="n">actions</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">sur_var</span><span class="o">+</span><span class="s2">&quot;_DIR&quot;</span><span class="p">:</span> <span class="n">ds</span><span class="p">[</span><span class="n">sur_var</span><span class="o">+</span><span class="s2">&quot;_DIR&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">alb_paramdict</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">*</span> <span class="mf">1.2</span><span class="p">,</span>
                    <span class="n">sur_var</span><span class="o">+</span><span class="s2">&quot;_DIF&quot;</span><span class="p">:</span> <span class="n">ds</span><span class="p">[</span><span class="n">sur_var</span><span class="o">+</span><span class="s2">&quot;_DIF&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">alb_paramdict</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">*</span> <span class="mf">1.2</span><span class="p">,}</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="n">actions</span> <span class="o">=</span> <span class="p">{</span><span class="n">sur_var</span><span class="p">:</span> <span class="n">ds</span><span class="p">[</span><span class="n">sur_var</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">alb_paramdict</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">*</span> <span class="mf">1.2</span><span class="p">}</span>

        <span class="c1"># * Modify the surf file</span>
        <span class="n">cesm</span><span class="o">.</span><span class="n">modify_surf</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">actions</span><span class="p">,</span> <span class="n">param_location</span><span class="o">=</span><span class="n">alb_paramdict</span><span class="p">)</span>

    <span class="c1"># password = &quot;***&quot;</span>
    <span class="n">password</span> <span class="o">=</span> <span class="s2">&quot;***&quot;</span>

    <span class="c1"># change the permission of the script</span>
    <span class="n">command_0</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sudo -S docker exec myclmu chmod +x /p/pyscripts/</span><span class="si">{</span><span class="n">script_name</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">run_command</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="n">command_0</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>

    <span class="c1"># run the script</span>
    <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sudo -S docker exec myclmu sh -c &#39;/p/pyscripts/</span><span class="si">{</span><span class="n">script_name</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
    <span class="n">run_command</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>

    <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;TREFMNAV&#39;</span><span class="p">,</span><span class="s1">&#39;TREFMXAV&#39;</span><span class="p">,</span><span class="s1">&#39;TSA&#39;</span><span class="p">,</span><span class="s1">&#39;RH2M&#39;</span><span class="p">]</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">cesm</span><span class="o">.</span><span class="n">nc_view</span><span class="p">()</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
        <span class="n">ds1</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">var</span><span class="p">]</span><span class="o">.</span><span class="n">assign_coords</span><span class="p">({</span><span class="s1">&#39;landunit&#39;</span><span class="p">:</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;land1d_ityplunit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">})</span>
        <span class="n">result</span><span class="p">[</span><span class="n">var</span><span class="o">+</span><span class="s2">&quot;_u&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds1</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">landunit</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">result</span><span class="p">[</span><span class="n">var</span><span class="o">+</span><span class="s2">&quot;_r&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds1</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">landunit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="n">script</span> <span class="o">=</span> <span class="s2">&quot;sudo -S rm -rf &quot;</span> <span class="o">+</span> <span class="n">cesm</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;local_fsurdat&#39;</span><span class="p">]</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">script</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">password</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>

<span class="n">Temperature</span> <span class="o">=</span> <span class="p">{}</span>


<span class="n">var_ls</span> <span class="o">=</span><span class="p">{</span><span class="s2">&quot;morphological&quot;</span><span class="p">:[</span><span class="s1">&#39;CANYON_HWR&#39;</span><span class="p">,</span><span class="s1">&#39;HT_ROOF&#39;</span><span class="p">,</span><span class="s1">&#39;THICK_ROOF&#39;</span><span class="p">,</span><span class="s1">&#39;THICK_WALL&#39;</span><span class="p">],</span>
        <span class="s2">&quot;radiative&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;ALB_IMPROAD&#39;</span><span class="p">,</span><span class="s1">&#39;ALB_ROOF&#39;</span><span class="p">,</span><span class="s1">&#39;ALB_WALL&#39;</span><span class="p">],</span>
        <span class="s2">&quot;thermal&quot;</span><span class="p">:[</span> 
        <span class="s1">&#39;TK_ROOF&#39;</span><span class="p">,</span><span class="s1">&#39;TK_WALL&#39;</span><span class="p">,</span><span class="s1">&#39;TK_IMPROAD&#39;</span><span class="p">,</span><span class="s1">&#39;CV_ROOF&#39;</span><span class="p">,</span><span class="s1">&#39;CV_WALL&#39;</span><span class="p">,</span><span class="s1">&#39;TK_IMPROAD&#39;</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">var_ls_ls</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;None&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">25</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">sur_var</span> <span class="ow">in</span> <span class="n">var_ls_ls</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">run_case</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">sur_var</span><span class="o">=</span><span class="n">sur_var</span><span class="p">)</span>
        <span class="n">Temperature</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="n">sur_var</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span>
            <span class="s2">&quot;loc&quot;</span><span class="p">:</span> <span class="n">case_loc</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> 
            <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="n">sur_var</span>
        <span class="p">}</span>
        
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;SSP370_urban_properties_none.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">Temperature</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

    <span class="c1"># reset the cases</span>
    <span class="n">command_0</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sudo -S docker exec myclm rm -rf /p/scratch/CESMDATAROOT/CaseOutputs/ssp370up&quot;</span>
    <span class="n">run_command</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="n">command_0</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
    <span class="n">command_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sudo -S docker exec myclm rm -rf /p/project/clm5.0/cime/scripts/ssp370up&quot;</span>
    <span class="n">run_command</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="n">command_1</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Junjie Yu, Zhonghua Zheng, Yuan Sun, Keith Oleson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>